FROM williamyeh/behave:latest

RUN apt-get update -yq && \ 
mkdir -p /usr/share/man/man1 && \
mkdir -p /usr/share/man/man7 && \
apt-get install -y postgresql-client libpq-dev build-essential

RUN pip3 install --no-cache-dir \
pyyaml \
psycopg2 \
pyautogui

# Force reinstall selenium to version 3.8.0
RUN pip3 install selenium==3.8.0 --force-reinstall

WORKDIR /var/www

ENTRYPOINT ["/var/www/tests/behave_tests"]